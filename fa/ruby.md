## روبی چیست؟
روبی (Ruby) زبان برنامه نویسی قدرتمند و پویایی است که از سال 1990 میلادی با ورود سبک جدیدی از زبان های برنامه نویسی شی گرا دنیای نرم افزاری را به خود خیره کرد. این زبان با الهام گرفتن از سینتکس زبان های پرل ، لیسپ ،پایتون و اسمالتاک توانسته سبکی را ارائه دهد که برای دوستکاران برنامه نویسی بی دردسر و شیرین باشد. شاید به جرات این زبان در شی گرایی بی همتاست و سبک مورد استفاده از آن به مراتب شیرین تر و ساده تر از رقبایش (Python , C++ , Java) است. 
روبی را یوکیهیرو ماتسوموتو (Yukihiro Matsumoto یا به اختصار Matz) ژاپونی به گونه ای ارائه داشته که پارادایم‌های گوناگون برنامه‌نویسی مانند برنامه‌نویسی تابعی، شیء گرا و بازتابی را پشتیبانی کند . این گستردگی در روبی همراه با قابلیت هایی چون متغیرهای پویا و مدیریت حافظه خودکار همراه شد و توانست خیلی از برنامه نویسان را به خود شیفته کند.

### Matz دربارهٔ انگیزه‌اش برای ساخت روبی گفته :
> در جستجوی زبانی بودم که از پایتون شیءگراتر و از پرل قدرتمندتر باشد. برای همین تصمیم گرفتم خودم آن را بسازم .
 
### او در کنفراسی در باره روبی این چنین سخن گفته : 
> روبی برای افزایش توان تولید و تفریح برنامه‌نویسان طراحی شده است و از اصل رابط کاربری خوب پیروی می‌کند. او تأکید می‌کند که طراحی سامانه‌ها باید بیشتر روی نیاز انسان‌ها متمرکز باشد تا رایانه‌ها. اغلب مردم، به ویژه برنامه‌نویسان، روی ماشین‌ها تمرکز می‌کنند. آن‌ها فکر می‌کنند "با انجام این کار ماشین‌ها سریعتر می‌شوند، ماشین‌ها در اجرا موثرتر می‌باشند و ..." آن‌ها بر ماشین تمرکز می‌کنند، اما در حقیقت ما نیاز داریم که به انسان‌ها توجه کنیم، اینکه چگونه آنها به برنامه‌نویسی توجه دارند و یا چگونه به اجرای برنامه‌های ماشین دقت می‌کنند.روبی برای تعقیب هدف کمترین غافلگیری بیان شدبه این معنی که زبان باید طوری رفتار کند که کمترین گیج‌کنندگی را برای استفاده‌کننده‌های آن داشته باشد. ماتسوموتو همچنین اظهار می‌دارد که هدف اولین طراحی او درست کردن زبانی که خودش از آن لذت ببرد بود. این کار با کم کردن کار برنامه‌نویس و ابهامات منطقی می‌باشد. اما کمترین غافلگیری هنوز خیلی به بیان زبان برنامه‌نویسی روبی نزدیک است. افراد ناشی شاید این را به این معنا تعبیر کنند که رفتارهای روبی سعی در متصل کردن اشتراکات رفتارهای دیگر زبان‌ها را دارد. در بحث ماه می ۲۰۰۵ در روزنامه "کامپ. لنگ. روبی" ماکسوموتو تلاش کرد که روبی را از مینیمم غافلگیری دور کند. توضیح اینکه هر شانس طراحی بعضی‌ها را متعجب می‌کند. او از استاندارد خود برای ارزیابی غافلگیری استفاده کرد. ماتسوموتو این را در یک گزارش مطرح ساخت. "همه یک پیشینه شخصی دارند، بعضی‌ها از جانب پایتون می‌آیند بعضی‌های دیگه از پرل و آن‌ها ممکن است از بعضی از جنبه‌های متفاوت زبان غافلگیر شوند. سپس آن‌ها به من می‌گویند ما از بعضی از جنبه‌های زبان غافلگیر شدیم، بنابرین روبی قانون کمترین غافلگیری را زیر پا گذاشته است. صبر کنید... هدف کمترین غافلگیری فقط برای شما نیست. این هدف به معنای کمترین غافلگیری ممکن برای بیان من می‌باشد. این به معنای کمترین غافلگیری بعد از آموزش کامل زبان است. برای مثال من قبل از اینکه روبی را طراحی کنم یک برنامه‌نویس سی‌پلاس‌پلاس بودم. من منحصراً دو، سه سال در سی‌پلاس‌پلاس برنامه نوشتم و بعد از دو سال برنامه‌نویسی با آن، هنوز مرا متعجب می‌کرد.

شاید سخنان Matz راجب روبی شما را کمی شگفت زده و روشن کند اما می خواهم مقداری از امکانات روبی را برایتان نام ببرم .

1. کاملاً شی گرا
2. داینامیک
3. نحو کوتاه و انعطاف‌پذیر
4. چهار سطح از حوزه دید متغیر شامل: global, class ,instance ,local
5. مدیریت استثناء
6. پشتیبانی از iterators و closures (بر اساس تبادل بلوکهای کد)
7. پشتیبانی محلی از regular expressions (شبیه پرل) در سطح زبان
8. سربارگزاری عملگرها
9. جمع‌آوری زباله خودکار
10. قابلیت حمل بالا
11. در همه سیستم‌عامل ها قابل پیاده‌سازی است
12. پردازش استثناء
13. سربار اپراتور
14. پشتیبانی شراکتی از multi-threading در تمام پلتفرمهای با استفاده از green threads
15. پشتیبانی کامل از یونیکد و رمزنگاریهای شخصیت چند گانه (از نسخه ۱٫۹)
16. کتابخانه‌های اشتراکی/DLL در اکثر پلتفرمها
17. introspection, reflection و meta-programming
18. اتصال بومی APIها در C
19. پوسته تعاملی روبی (REPL)
20. بسته مدیریت متمرکز از طریق RubyGems
21. کتابخانه استاندارد بزرگ
22. پشتیبانی از تزریق نیازمندی
23. continuations و generators

به هر حال از ۲۱ دسامبر ۱۹۹۵میلادی (۳۰ آذر ۱۳۷۴) که اولین ویرایش رسمی روبی منتشر شده تا به امروز در حال گسترش و توسعه بوده و بی وقفه در حال به روز رسانی و خلق ایده هایی نوین برای برنامه نویسی است . 

## چگونه روبی را نصب کنیم ؟
نصب روبی در تمامی سیستم عامل ها ساده و آسان است اما همان گونه که عرض کردیم ، فرض را بر این میگیریم که شما هیچگونه آشنایی با مباحث ندارید . اما اگر به لازم نمی دانید نصب روبی را از ما فرا بگیرید می توانید از روی این قسمت بگذرید .
به هر حال ما قصد داریم نحوه نصب روبی در سیستم عامل های Unix Like و MS Windows  را به شما آموزش دهیم.

### نصب بر روی سیستم عامل های Unix Like 
غالباً نسخه ای پایدار بر روی تمامی سیستم عامل ها به شکل پیشفرض وجود دارد ، اما به شکل کلی  برای نصب روبی از سه روش استفاده می شود . 

* نصب از طریق منابع نرم افزای سیستم عامل ها (Repository) 
* منابع مستقل ( Rbenv و RVM ) 
* نصب از طریق فایل قابل نصب

هر سه روش روبی را به شکل کامل نصب خواهند کرد اما تفاوت آن ها بر روی چگونگی نصب و ورژن مورد استفاده از روبی است . برای مثال همین امروز نسخه 2.0.0 از روبی روی ریپازیتوری مک موجود بود اما آخرین نسخه پایدار روبی برای نصب ، نسخه 2.3.0 است و باید توجه داشته باشید نسخه نصب شده مورد نیاز شما است یا خیر .
برای نصب روبی بر روی این سیستم عامل ها لازم است دستور یا دستوراتی را روی Shell یا Terminal آن ها وارد کنید که در ادامه طریقه نصب روبی بر روی بسیاری از آن ها را عرض خواهم کرد .

نصب روبی توسط منابع نرم افزای سیستم عامل ها (OS Repository) 
-----------------------------------------------------------
#### نصب روبی بر روی  Mac-OS X

```{r, engine='bash', count_lines}
$ brew install ruby
```
نسخه ای که نصب شد 2.0.0 بود.
#### نصب روبی بر روی Debian و Ubuntu
```{r, engine='bash', count_lines}
$ sudo apt-get install ruby-full
```
نسخه ای که برای من نصب شد 1.9.3 بود. 
#### نصب روبی بر روی Arch Linux و Manjaro
```{r, engine='bash', count_lines}
$ sudo pacman -S ruby
```
نسخه نصب شده همان نسخه نهایی پایدار روبی بود (2.3.0) . 
#### نصب روبی بر روی Fedora و CentOS
```{r, engine='bash', count_lines}
$ sudo yum install ruby
```
نسخه نصب شده عموماً نسخه ای به روز از روبی خاهد بود اما نسخه نصب شده برای من نسخه ی 2.2.3 بود.
#### نصب روبی بر روی Solaris
```{r, engine='bash', count_lines}
$ pkg install runtime/ruby-18
```
نسخه نصب شده برای من نسخه قدیمی 1.8.7 بود .

نصب روبی توسط منابع مستقل ( Rbenv و RVM ) 
-----------------------------------------
همان گونه که مشاهده فرمودین اکثر توزیع ها بر روی ریپازیتوری خود نسخه ای قدیمی یا آخربن نسخه پایدار روبی را بر روی ریپازیتوریشان داشتند . 
اما شاید ما بخواهیم برای پروژه های مختلف مان از نسخه ای خاص یا به روز استفاده کنیم .
یعنی اگر پروژه ای دارید که با نسخه 1.8.7 نوشته اید اما نسخه سیستم شما بالا تر است و امکان بازگشت ندارید یا اینکه کلا می خواهید از نسخه ای به روز یا حتی بتا و بالا تر از نسخه ریپازیتوری بهره مند شوید ، باید از منابع مستقل (RVM یا  Rbenv) استفاده کنید. 

#### نصب روبی از طریق Rbenv (پیشنهاد ما) 
Rbenv یکی از منابع مستقل برای ارائه نسخه های مختلف روبی است که میتوان با استفاده از Command line، نسخه هایی مختلف از روبی را بر روی سیستم نصب کرد و به شکل مستقل از آن ها استفاده کرد.
برای نصب روبی از طریق Rbenv ابتدا باید روبی موجود روی سیستم خود را پاک کنید.
همچنین از وجود GIT بر روی سیستم خود مطمئن شوید و سپس مراحل زیر را به ترتیب انجام دهید:

1. دانلود و نصب Rbenv در دایرکتری به نام .rbenv
```{r, engine='bash', count_lines}
$ git clone https://github.com/rbenv/rbenv.git ~/.rbenv
```
```{r, engine='bash', count_lines}
$ cd ~/.rbenv && src/configure && make -C src
```
2. ست کردن Rbenv بر روی Bash
```{r, engine='bash', count_lines}
$ echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bash_profile
```
```{r, engine='bash', count_lines}
$ echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
```
3. ست کردن Rbenv بر روی ZSH
```{r, engine='bash', count_lines}
$ echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bash_profile
```
```{r, engine='bash', count_lines}
$ echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.zshrc
```
4. برای راه اندازی Rbenv از دستور زیر استفاده کنید
```{r, engine='bash', count_lines}
$ ~/.rbenv/bin/rbenv init
```
5. شل را بسته و دباره باز کنید و برای اطمینان از صحت فرایند نصب از دستور زیر استفاده کنید
```{r, engine='bash', count_lines}
$ type rbenv
```
6. برای استفاده از روبی و امکان دانلود ورژه های آن از دستور زیر استفاده کنید
```{r, engine='bash', count_lines}
$ git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build
```
7. یک بار شل را بسته و دباره باز کنید .
8. اینک شما می توانید نسخه های مختلف از Ruby را نصب کند و برای مشاهده لیست نسخه های موجود در Rbenv از دستور زیر استفاده می کنند.
```{r, engine='bash', count_lines}
$ rbenv install -l
```
9.  برای نصب نسخه های مورد نیاز از دستوراتی شبیه به دستورات زیر باید استفاده کرد.
```{r, engine='bash', count_lines}
$ rbenv install 2.4.0-dev
```
```{r, engine='bash', count_lines}
$ rbenv install 1.8.7-p352
```
10. برای اطلاع از نسخه های نصب شده از دستور زیر استفاده می کنند.
```{r, engine='bash', count_lines}
$ rbenv versions
```
11. برای استفاده از نسخه ای به صورت عمومی از دستوری شبیه دستور زیر استفاده کنید.
```{r, engine='bash', count_lines}
$ rbenv global 2.4.0-dev
```
12. برای استفاده از روبی بر روی پروژه ای خاص به شکل محلی از دستوری شبیه به دستور زیر را استفاده می کنند.
``` {r, engine='bash', count_lines}
$ rbenv local 1.8.7-p352
```
13. برای خارج کردن شدن از حالت محلی از دستور زیر باید استفاده کرد .
```{r, engine='bash', count_lines}
$ rbenv local --unset
```
بی شک Rbenv قوی ترین منبع مستقل برای نصب روبی می باشد . گفتنی ها را عرض کردم اما برای اطلاع بیشتر از نهوه نصب یا کارکرد Rbenv به آدرس  https://github.com/rbenv/rbenv سر بزنید .

نصب روبی از طریق RVM
--------------------
RVM یک ابزار برای نصب روبی از طریف Command like است که با استفاده از دستوراتش میتواند محیطی برای استفاده از روبی را فراهم آورد .(قبل هر چیز از نصب بودن ابزار های curl و gpg در سیستم خود مطمئن باشید)
1. برای نصب نسخه ی پایدار RVM میتوان دستور زیر را اعمال کرد
> اگر پس از دستور زیر خطایی دیدید ممکن است نیاز به gpg2 داشته باشید .
```{r, engine='bash', count_lines}
$ gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 
```
```{r, engine='bash', count_lines}
$ \curl -sSL https://get.rvm.io | bash -s stable
```
2. برای نصب نسخه ی دولپمنت و ناپایدار RVM میتوان دستور زیر را اعمال کرد
```{r, engine='bash', count_lines}
$ \curl -sSL https://get.rvm.io | bash 
```
3. برای نصب ورژنی خاص از RVM از دستوری شبیه دستور زیر را وارد کنید
```{r, engine='bash', count_lines}
$ \curl -sSL https://get.rvm.io | bash -s -- --version latest
```
```{r, engine='bash', count_lines}
$ \curl -sSL https://get.rvm.io | bash -s -- --branch [owner/][repo]
```
4. برای اشکال زدایی RVM از دستور زیر استفاده می کنند
```{r, engine='bash', count_lines}
$ \curl -sSL https://get.rvm.io | bash -s -- --trace
```
5. برای نشاندن دستورات RVM بر روی Terminal از دستورات زیر استفاده میکنند
```{r, engine='bash', count_lines}
$ \curl -sSL https://get.rvm.io | bash -s -- --ignore-dotfiles
```
```{r, engine='bash', count_lines}
$ echo "source $HOME/.rvm/scripts/rvm" >> ~/.bash_profile
```
6. برای قرار دادن RVM بر روی یوزری خاص از دستوری شبیه دستور زیر استفاده کنید
```{r, engine='bash', count_lines}
$ rvm user gemsets 
```
7. ترمینال را بسته و دوباره باز کنید و دستور زیر را جهت راه اندازی اولیه RVM تایپ کنید
```{r, engine='bash', count_lines}
$ source ~/.rvm/scripts/rvm
```
8. برای فهمیدن صحت فرایند نصب از دستور زیر استفاده کنید(در خوجی باید شاهد پیغامی شبیه به این باشید «rvm is a function» تا از صحت نصب آن مطمئن شوید ) .
```{r, engine='bash', count_lines}
$ type rvm | head -n 1
```
9. برای قهمیدن از ورژن های روبی موجود در RVM از دستور زیر استفاده می کنیم
```{r, engine='bash', count_lines}
$ rvm list known
```
10. برای نصب نسخه مورد نظرمان و استفاده از آن به شکل محلی باید دستوراتی شبیه دستورات زیر را وارد می کنیم
```{r, engine='bash', count_lines}
$ rvm install 2.2.2
```
```{r, engine='bash', count_lines}
$ rvm use 2.2.2
```
11. برای استفاده از همان ورژن به صورت پیشفرض از دستور زیر استفاده کنید
```{r, engine='bash', count_lines}
$ rvm use 2.2.2 --default
```
12. برای قهمیدن از نسخه روبی پیشفرض شده از دستور زیر استفاده می کنیم
```{r, engine='bash', count_lines}
$ ruby -v
```
روش نصب را عرض کردم اما برای اطلاع از فرایند نصب آن به سایت rvm.io مراجعه کنید تا متوجه تنزیمات دیگر آن شوید .

نصب روبی از طریق فایل قابل نصب 
------------------------------
یکی دیگر از راه های دیگر جهت نصب روبی استفاده از فایل قابل نصب است . به گونه ای که شما ابتدا فایل را از بخش دانلود در سایت رسمی روبی (www.ruby-lang.org) دانلود می کنید و پس از unzip کردن آن مراحل زیر را انجام می دهید.

1. پس از unzip کردن فایل، Terminal را باز کنید و به دایرکتوری unzip شده بروید.(بر فرض مثال دایرکتوری ما به اسم ruby-1.9.0 است که در دایرکتوری Download قرار گرفته)
```{r, engine='bash', count_lines}
$ cd ~/Download/ruby-1.9.0
```
2. پس از رفتن به دایرکتوری مورد نظر دستورات زیر را به ترتیب جهت نصب وارد Terminal کنید
```{r, engine='bash', count_lines}
$ ./configure
$ make
$ sudo make install
```
3. یک بار Terminal را بسته و دوباره باز کنید و سپس دستور زیر را برای مطلع شدن از صحت نصب روبی وارد کنید
```{r, engine='bash', count_lines}
$ ruby -v
```
نصب بر روی ویندوز
-----------------
نصب روبی در Windows بسیار ساده است . به گونه ای که با نصب فقط یک فایل بر روی سیستمتان امکان پذیر است . فایل نصبی روبی در ویندوز را rubyinstaller می گویند که بسیار ساده و قابل فهم Ruby را نصب می کند.
برای تهیه فایل قابل نصب روبی باید به بخش Download , موجود سایت http://rubyinstaller.org بروید و نسخه مورد استفاده خود را نصب کنید.

آشنایی جزعی با سینتکس روبی
==========================
همان گونه که در قسمت های قبلی اشاره کردم سینتکس روبی بسیار شبیه سینتکس پرل و پایتون است. اعلان کلاسها و متدها توسط کلمات کلیدی انجام می‌شود. در مقایسه با پرل متغیرها الزاماً با یک علامت خاص شروع نمی‌شوند. (وقتی از چنین علائمی استفاده شود علامت حوزه دید متغیر را تغییر می‌دهد) بارزترین تفاوت روبی از سی و پرل آنست که کلمات کلیدی (بجای براکت) برای تعریف بلوکهای کد استفاده می‌شوند. سطر جدید به‌عنوان پایان یک جمله بکار برده می‌شود در عین حال که برای اینکار می‌توان از یک سمی کالون (;) نیز استفاده کرد . برعکس پایتون تو رفتگیها در روبی معنی خاصی ندارند .
روبی دارای یک مفسر تعاملی خط فرمان بنام irb است که می‌تواند برای آزمایش سریع کد بکار رود. Irb را خیلی راحت از طریق Terminal می توان فراخانی کرد.
 نمونه‌هایی از سینتکس روبی را در ادامه به شما نشان خواهم  داد و شما می توانید آنها را در irb تست کنید.

* پرینت کردن یک پیام 
```ruby
print “Hello ”
print “World \n”
puts “Hello “
puts “Iran”
```
> نتیجه در خروجی 
 
  ```
  Hello World 
  Hello 
  Iran
  ```

* کامنت کردن یک خط
```ruby
#this is a comment to this code and it doesn't  see on  output 

a = “I am Ruby”
print “#{a}”

=begin
This is another way to make some line to comments  .
we only can see:
 “I am Ruby”
 on output when we run this code
=end
```
> نتیجه در خروجی:

```
I am Ruby
```
* ساخت متغیرها
```ruby
string = “Ruby On Rails”
first-numerical-variable = 102
second-numerical-variable = 2103.23
boolean = true
@instance-variable = “hello Faalis”
@@glubal-variable = 192.3202
```
* ساخت آرایه ها
```ruby
first-array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
second-array = [1..10]
third-array = [“ruby”, ”pry”, ”Yellowen”, ”Iran”]
fourth-array = [1, [2, 6], “Omid”, {:one => “1”}, 402]
```
* تولید هش ها
```ruby
our-hash = {:ruby => “ruby on rails”, :python => “flask”}
```
* ساخت شرط ها

> first exam 

```ruby
x=1
if x > 2
 puts "x is greater than 2"
elsif x <= 2 and x!=0
 puts "X is 1"
else
 puts "I can't guess the number"
end
```

```
نتیجه در خروجی:

X is 1
```
> secound exam
```ruby
grade = B

case grade
when "A", "B"
  puts 'You pretty smart!'
when "C", "D"
  puts 'You pretty dumb!!'
else
  puts "You can't even use a computer!"
end
```
> نتیجه در خروجی:

``` 
You pretty smart!
```
* ساخت حلقه ها
```ruby
i = 0
num = 5

while i < num  do
 puts("now Inside the loop, i = #{i}" )
  i +=1
end
```
> نتیجه در خروجی:

```
Value of local variable is 0
Value of local variable is 1
Value of local variable is 2
Value of local variable is 3
Value of local variable is 4
-----another way to do last example----
Value of local variable is 0
Value of local variable is 1
Value of local variable is 2
Value of local variable is 3
Value of local variable is 4
```
* استفاده از متود ها
```ruby
def first
    puts "one"
  end

  def second
first
   puts "two"
  end
  
second 
```
* استفاده از کلاس ها (شی گرایی)
```ruby 
class Person
   def initialize(name, age)
     @name, @age = name, age
   end

   def <=>(person)
     @age <=> person.age
   end
   
    def to_s
     "#{@name} (#{@age})"
   end

   attr_reader :name, :age
 end

 group = [ Person.new("John", 20),
           Person.new("Markus", 63),
           Person.new("Ash", 16)
         ]

 puts group.sort.reverse       #sort and reverse object to sorting and reversing 
```
> نتیجه در خروجی (کد بالا سه نام را بر حسب سن از زیاد به کم چاپ می‌کند):

```
Markus (63)
John (20)
Ash (16)
```
